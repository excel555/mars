<div class="fenshi <{if $detail['active_type'] neq 3}>hide<{/if}> zhekou_div">
    <div class="form-group">
        <label class="col-sm-2 control-label">活动奖励：</label>
        <div class="col-sm-10">
            <table class="table table-striped table-bordered ">
                <tr>
                    <th width="15%">开始时间<span style="color:#aaa;font-size: 12px"></span></th>
                    <th width="15%">结束时间<span style="color:#aaa;font-size: 12px"></span></th>
                    <th width="30%">奖励方式</th>
                    <th width="15%">减免金额上限</th>
                    <th width="15%">最终金额</th>
                    <th width="10%">操作</th>
                </tr>
                <{if $detail['config']|@count gt 0 && $detail['active_type'] eq 3}>
                <{foreach key=key item=item from=$detail['config']}>
                <tr >
                    <td>
                        <div class="col-sm-12">
                            <div class="input-group date  col-md-10" data-link-field="dtp_input1" >
                                <input class="form-control hour_c" type="text" name="start_hour[]" value="<{$item['start_hour']}>" readonly="readonly"  onmouseover="get_time(this)" onchange="chang_hour(this)">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="col-sm-12">
                            <div class="input-group date  col-md-10" data-link-field="dtp_input1" >
                                <input class="form-control hour_c" type="text" name="end_hour[]" value="<{$item['end_hour']}>" readonly="readonly"  onmouseover="get_time(this)" onchange="chang_hour(this)">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" name="discount_f[]" value="<{$item['discount_f']}>" onchange="check_zhe(this.value, this)">
                        </div>
                        <label class="col-sm-7 control-label" style="padding-left:0;padding-right:0;text-align:left">折<span style="color:#aaa;font-size: 12px">(0-10,0:免单,10:不打折)</span></label>
                    </td>
                    <td>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="max_money_f[]" value="<{$item['max_money_f']}>">
                        </div>
                        <label class="col-sm-4 control-label" style="padding-left:0;padding-right:0;text-align:left">元</label>
                    </td>
                    <td>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="final_money_f[]" value="<{$item['final_money_f']}>" placeholder="最终">
                        </div>
                        <label class="col-sm-4 control-label" style="padding-left:0;padding-right:0;text-align:left">元</label>
                    </td>
                    <td>
                        <i class="glyphicon-plus" onclick="ruleAdd(this)"></i>&nbsp;&nbsp;&nbsp;
                        <i class="glyphicon-minus" onclick="ruleDel(this)"></i>
                    </td>
                </tr>
                <{/foreach}>
                <{else}>
                <tr >
                    <td>
                        <div class="col-sm-12">
                            <div class="input-group date  col-md-10" data-link-field="dtp_input1" id="to_start" >
                                <input class="form-control hour_c" type="text" name="start_hour[]" value="" readonly="readonly"  onmouseover="get_time(this)" onchange="chang_hour(this)">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="col-sm-12">
                            <div class="input-group date  col-md-10" data-link-field="dtp_input1" id="to_end" >
                                <input class="form-control hour_c" type="text" name="end_hour[]" value=""  readonly="readonly" onmouseover="get_time(this)" onchange="chang_hour(this)">
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" name="discount_f[]" value="10" placeholder="折扣" onchange="check_zhe(this.value, this)">
                        </div>
                        <label class="col-sm-7 control-label" style="padding-left:0;padding-right:0;text-align:left">折<span style="color:#aaa;font-size: 12px">(0-10,0:免单,10:不打折)</span></label>
                    </td>
                    <td>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="max_money_f[]" value="" placeholder="上限">
                        </div>
                        <label class="col-sm-4 control-label" style="padding-left:0;padding-right:0;text-align:left">元</label>
                    </td>
                    <td>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="final_money_f[]" value="" placeholder="最终">
                        </div>
                        <label class="col-sm-4 control-label" style="padding-left:0;padding-right:0;text-align:left">元</label>
                    </td>
                    <td>
                        <i class="glyphicon-plus" onclick="ruleAdd(this)"></i>&nbsp;&nbsp;&nbsp;
                        <i class="glyphicon-minus" onclick="ruleDel(this)"></i>
                    </td>
                </tr>
                <{/if}>
            </table>
        </div>
    </div>
</div>
<script type="application/javascript">
    function chang_hour(obj){
        var index = $(".hour_c").index(obj);

        var date="2017-11-15 "+$(obj).val();
        date = new Date(Date.parse(date.replace(/-/g, "/")));
        var _this_val = date.getTime();

        $('.hour_c').each(function(i, v){
            var date="2017-11-15 "+$(this).val();
            date = new Date(Date.parse(date.replace(/-/g, "/")));
            var _each_val = date.getTime();
            if(i<index && _each_val > _this_val){
                alert('选择的时间不正确');
                $(obj).val('');
                return false;
            }
        })

    }

</script>